<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Monopoly Deal - Client Hosted</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app" id="appRoot">
      <header class="hero">
        <div>
          <p class="eyebrow">Monopoly Deal</p>
          <h1>Client-Hosted Multiplayer</h1>
          <p class="subtitle">Host a game locally and connect friends using manual game codes.</p>
        </div>
        <div class="status" id="connectionStatus">Offline</div>
        <div class="notice" id="notice" hidden></div>
      </header>

      <section class="panel connection-panel" id="connectionPanel">
        <div class="panel-header">
          <h2>Connection</h2>
          <p>Host holds the main state. Share the invite URL to connect.</p>
        </div>
        <div class="panel-grid">
          <div class="card" id="hostCard">
            <h3>Host a Game</h3>
            <label class="field">
              <span>Your Name</span>
              <input id="hostName" type="text" placeholder="Dealer" />
            </label>
            <div class="inline-actions">
              <button class="primary" id="hostGame">Create Game</button>
              <div class="invite-row" id="inviteRow" hidden>
                <button class="icon-button" id="copyInvite" aria-label="Copy invite URL">
                  ðŸ“‹
                </button>
                <a id="hostInviteLink" class="invite-link" href="#" target="_blank" rel="noopener noreferrer">
                  Invite link
                </a>
              </div>
            </div>
          </div>
          <div class="card" id="joinCard">
            <h3>Join a Game</h3>
            <label class="field">
              <span>Your Name</span>
              <input id="joinName" type="text" placeholder="Player name" />
            </label>
            <label class="field">
              <span>Invite Code</span>
              <input id="joinCode" type="text" placeholder="Paste code from URL" />
            </label>
            <button class="primary" id="joinGame">Join Game</button>
          </div>
        </div>
        <p class="note">Tip: The code is the part after `?game=` in the invite URL.</p>
      </section>

      <section class="panel" id="lobbyPanel" hidden>
        <div class="panel-header">
          <h2>Lobby</h2>
          <p>Wait for everyone to connect, then start the game.</p>
        </div>
        <div class="lobby-grid">
          <div class="card">
            <h3>Players</h3>
            <ul id="playerList" class="player-list"></ul>
          </div>
          <div class="card" id="hostControls">
            <h3>Host Controls</h3>
            <button class="primary" id="startGame" disabled>Start Game</button>
            <p class="note">Minimum 2 players recommended.</p>
          </div>
        </div>
      </section>

      <section class="panel" id="gamePanel" hidden>
        <div class="panel-header">
          <h2>Game Table</h2>
          <div class="turn-info">
            <span id="turnLabel">Waiting for host...</span>
            <span id="playsLeft">Plays: 0</span>
          </div>
        </div>
        <div class="game-grid">
          <div class="table">
            <div id="tableArea" class="table-area"></div>
          </div>
          <div class="sidebar">
            <div class="card">
              <h3>Actions</h3>
              <div id="actionArea" class="action-area"></div>
            </div>
            <div class="card">
              <h3>Game Log</h3>
              <div id="logArea" class="log-area"></div>
            </div>
          </div>
        </div>
        <div class="card hand-card">
          <h3>Your Hand</h3>
          <div id="handArea" class="hand-area"></div>
          <div class="hand-actions">
            <button class="ghost" id="endTurn" disabled>End Turn</button>
            <button class="ghost" id="discardExtras" disabled>Discard Down To 7</button>
          </div>
        </div>
      </section>
    </main>

    <div class="modal" id="modal" hidden>
      <div class="modal-card">
        <h3 id="modalTitle">Action</h3>
        <div id="modalBody" class="modal-body"></div>
        <div class="modal-actions">
          <button class="ghost" id="modalCancel">Cancel</button>
          <button class="primary" id="modalConfirm">Confirm</button>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
